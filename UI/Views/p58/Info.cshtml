@model UI.Models.Tab1.BaseTab1ViewModel
@inject BL.Factory _f

@{

    Layout = "~/Views/Shared/_LayoutSubform.cshtml";
    if (Model.pid == 0) return;

    var _rec = _f.p58TaskRecurrenceBL.Load(Model.pid);

    var _lisP59 = _f.p58TaskRecurrenceBL.GetList_p59(Model.pid);

    var _GridUrl = new UI.Menu.TheMenuSupport(_f).GetMainmenuEntityUrl("p58");
}

@addTagHelper *, UI



@Html.Raw("<div class='info_record_container'>")


<a class="btn" href="@(_GridUrl)" target="_top" title="Přejít do přehledu šablon opakovaných úkolů"><span class="material-icons-outlined-btn" style="font-size:16px;">grid_on</span></a>

<kbd>@_rec.p58Name</kbd>

<br />


<div class="card recpageboxauto">
    <div class="card-body">
        <div class="card-title recpagetitle bgp51">
            @_f.tra("Přesný rozpis plánu generování úkolů")
        </div>
        <table class="table table-hover">
            <tr>
                <th>@_f.tra("Název")</th>
                <th>@_f.tra("Zahájení")</th>
                <th>@_f.tra("Termín")</th>
                <th>@_f.tra("Kdy má být vygenerováno")</th>
                <th></th>

            </tr>
            @foreach (var c in _lisP59)
            {
                <tr>
                    <td>
                        @c.p59Name
                    </td>
                    <td>
                        @BO.Code.Bas.ObjectDate2String(c.p59PlanFrom)
                    </td>
                    <td>
                        @BO.Code.Bas.ObjectDate2String(c.p59PlanUntil)
                    </td>
                    <td>
                        @BO.Code.Bas.ObjectDate2String(c.p59DateCreate)
                    </td>
                    <td class="rowvalhover">
                        @if (c.p56ID_NewInstance > 0)
                        {
                            <kbd style="background-color:green;">@_f.tra("Již vygenerováno")</kbd>
                            
                            <br />
                            <var>
                                @c.p56Name
                            </var>
                            <small>
                                @BO.Code.Bas.ObjectDateTime2String(c.p56DateInsert)
                            </small>
                        }
                        
                        @if (c.p59ErrorMessage_NewInstance != null)
                        {
                            <span style="color:red;">@c.p59ErrorMessage_NewInstance</span>
                        }


                    </td>



                </tr>


            }
        </table>


    </div>
</div>


@Html.Raw("</div>")

<div style="clear:both;"></div>


<script type="text/javascript">
   
    $(document).ready(function () {



    });

    

</script>
