@model UI.Models.Tab1.p28Tab1
@inject BL.Factory _f

@{

    Layout = "~/Views/Shared/_LayoutSubform.cshtml";
    if (Model.Rec == null) return;
    if (Model.ff1 != null) Model.ff1.caller = "info";

    var _disp = _f.p28ContactBL.InhaleRecDisposition(Model.Rec.pid,Model.Rec);
    InfoButtonsViewModel _buttons = new InfoButtonsViewModel() { prefix = Model.prefix, pid = Model.pid, disp = _disp };

    var _lisO32 = _f.p28ContactBL.GetList_o32(Model.pid, 0,0);
    var _lisP30 = _f.p28ContactBL.GetList_p30(Model.pid);
}

@addTagHelper *, UI

<script src="~/js/rejstriky.js" asp-append-version="true"></script>

@Html.Raw("<div class='info_record_container'>")

<div>
    @Html.EditorFor(m => _buttons, "~/Views/Shared/_InfoButtons.cshtml")
</div>


<div class="card recpageboxauto">
    <div class="card-body">
        @Html.EditorFor(m => m.Rec, "~/Views/Shared/_p28RecHeaderBox.cshtml")

        @Html.EditorFor(m => m.ff1, "~/Views/Shared/_FreeFieldsRO.cshtml")

        
    </div>
</div>


@if (Model.Rec.p51ID_Billing > 0 || Model.Rec.p92ID > 0 || Model.Rec.p28BillingLangIndex > 0)
{
    <div class="card recpageboxauto">
        <div class="card-body">

            @await Html.PartialAsync("~/Views/Shared/_p28RecBillingBox.cshtml",Model.Rec)

        </div>
    </div>
}



@if (_lisO32 != null && _lisO32.Count() > 0)
{
    <div class="card recpageboxauto">
        <div class="card-body">

            @await Html.PartialAsync("~/Views/Shared/_lisO32.cshtml", _lisO32)

        </div>
    </div>
}


@Html.EditorFor(m => m, "~/Views/Shared/_TagsTab1.cshtml")

@if (_lisP30 != null && _lisP30.Count() > 0)
{
    <div class="card recpageboxauto">
        <div class="card-body">
            
            @if (Model.JeKontaktniOsoba)
            {
                @await Html.PartialAsync("~/Views/Shared/_lisP30Matky.cshtml", _lisP30)
            }
            else
            {
                @await Html.PartialAsync("~/Views/Shared/_lisP30.cshtml", _lisP30)
                
            }

        </div>
    </div>
}

@Html.Raw("</div>")


<div style="clear:both;"></div>