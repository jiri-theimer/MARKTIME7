@model UI.Models.Tab1.b05Tab1
@inject BL.Factory _f

@{

    Layout = "~/Views/Shared/_LayoutSubform.cshtml";
    if (Model.Rec == null) return;


    var _NotepadLookAt = new UI.Models.Notepad.LookAtViewModel() { IsTab1 = true, prefix = "b05", pid = Model.Rec.pid, NotepadContent = Model.Rec.b05Notepad, x04ID = Model.Rec.x04ID };
    bool _bolRecOwner = false;
    if (Model.Rec.j02ID_Sys==_f.CurrentUser.pid || _f.CurrentUser.IsAdmin || _f.CurrentUser.TestPermission(BO.PermValEnum.GR_b05OwnerAll))
    {
        _bolRecOwner = true;
    }
}

@addTagHelper *, UI



@Html.Raw("<div class='info_record_container'>")

@if (_bolRecOwner)
{
    <a class="btn btn-light" href="javascript:_edit('b05',@Model.pid)" title="@_f.tra("Upravit kartu záznamu")"><span class="material-icons-outlined-btn">edit_note</span></a>
}
<div class="card recpagebox400">
    
    <div class="card-body">
        @if (Model.Rec.b02ID_To > 0)
        {
            <div class="card-title recpagetitle bgp40">
                @Html.Raw(Model.Rec.StatusMoveHtmlRed)

            </div>
        }
        else
        {
            @if (Model.Rec.b06ID > 0)
            {
                <div class="card-title recpagetitle bgp40">
                    @Html.Raw(Model.Rec.b06Name)

                </div>
            }
        }

        <table class="table table-hover">


            @if (Model.Rec.b05Name != null)
            {
                <tr>
                    <td class="tdlab">
                        @_f.tra("Název"):
                    </td>
                    <td class="tdval">
                        <myval value="@Model.Rec.b05Name"></myval>
                    </td>
                </tr>

            }




            @if (Model.Rec.b05Date != null)
            {
                <tr>
                    <td class="tdlab">
                        @_f.tra("Datum"):
                    </td>
                    <td class="tdval">
                        <myval value="@Model.Rec.b05Date" datatype="date"></myval>
                    </td>
                </tr>

            }

            @if (Model.RecP41 != null)
            {
                <tr>
                    <td class="tdlab">
                        @_f.getP07Level(Model.RecP41.p07Level, true):
                    </td>
                    <td class="tdval">
                        <myval value="@Model.RecP41.FullName"></myval>
                    </td>
                </tr>

            }
            else
            {
                @if(Model.RecP28 != null)
                {
                    <tr>
                        <td class="tdlab">
                            @(Model.RecP28.p29Name):
                        </td>
                        <td class="tdval">
                            <myval value="@Model.RecP28.p28Name"></myval>
                        </td>
                    </tr>
                }
                else
                {
                    @if(Model.RecO23 != null)
                    {
                        <tr>
                            <td class="tdlab">
                                @(Model.RecO23.o18Name):
                            </td>
                            <td class="tdval">
                                <myval value="@Model.RecO23.o23Name"></myval>
                            </td>
                        </tr>
                    }
                    else
                    {
                        <tr>
                            <td class="tdlab">
                                @(BO.Code.Entity.GetAlias(Model.Rec.b05RecordEntity)):
                            </td>
                            <td class="tdval">
                                <myval value="@_f.CBL.GetObjectAlias(Model.Rec.b05RecordEntity,Model.Rec.b05RecordPid)"></myval>
                            </td>
                        </tr>
                    }
                    
                }
                


            }


        </table>


        @Html.EditorFor(m => m.Rec, "~/Views/Shared/_TimeStamp.cshtml")


    </div>

    @if (Model.lisO27 != null)
    {
        @Html.EditorFor(m => m, "~/Views/Shared/_lisO27Tab1.cshtml")
    }

</div>










@Html.Raw("</div>")

<div style="clear:both;"></div>


<div>
    @Html.EditorFor(m => _NotepadLookAt, "~/Views/Shared/_NotepadRO.cshtml")
</div>


